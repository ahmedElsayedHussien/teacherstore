{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h1 class="h5 mb-3">تسجيل سداد للفاتورة #{{ invoice.id }}</h1>

  <div class="card p-3 mb-3">
    <div><strong>الطالب:</strong> {{ invoice.student.first_name }} {{ invoice.student.last_name }}</div>
    <div><strong>الشهر/السنة:</strong> {{ invoice.month }}/{{ invoice.year }}</div>
    <div><strong>المبلغ:</strong> {{ invoice.amount_egp }} EGP</div>
    <div><strong>المدفوع:</strong> {{ invoice.total_paid }} EGP</div>
    <div><strong>المتبقي:</strong> {{ invoice.remaining }} EGP</div>
    <div><strong>الحالة:</strong> {{ invoice.get_status_display }}</div>
  </div>

  <form method="post" class="card p-3">
    {% csrf_token %}
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">المبلغ</label>
        {{ form.amount_egp }}
      </div>
      <div class="col-md-4">
        <label class="form-label">الطريقة</label>
        {{ form.method }}
      </div>
      <div class="col-md-4">
        <label class="form-label">التاريخ</label>
        {{ form.received_at }}
      </div>
      <div class="col-md-6">
        <label class="form-label">مرجع/إيصال</label>
        {{ form.reference }}
      </div>
      <div class="col-md-6">
        <label class="form-label">ملاحظة</label>
        {{ form.note }}
      </div>
    </div>

    <div class="mt-3 d-flex gap-2">
      <button class="btn btn-success">تسجيل السداد</button>
      <a class="btn btn-outline-secondary" href="{% url 'core:dashboard' %}#tab-billing">إلغاء</a>
    </div>
  </form>
</div>
{% endblock %}
