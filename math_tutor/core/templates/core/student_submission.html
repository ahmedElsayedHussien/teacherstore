{% load misc %}
<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>تفاصيل تسليمي</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css">
</head>
<body class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h6 m-0">تفاصيل تسليمي</h1>
    <a class="btn btn-outline-secondary btn-sm" href="{% url 'core:student_dashboard' %}">رجوع</a>
  </div>

  <div class="card p-3">
    <div><strong>الواجب:</strong> {{ sub.assignment.title }}</div>
    <div><strong>المجموعة:</strong> {{ sub.assignment.group.name }}</div>
    <div class="mt-2"><strong>الحالة:</strong>
      {% if sub.status == "GRADED" %}<span class="badge bg-success">مصحّح</span>
      {% elif sub.status == "LATE" %}<span class="badge bg-warning text-dark">متأخر</span>
      {% else %}<span class="badge bg-secondary">مسلّم</span>{% endif %}
    </div>
    <div class="mt-2"><strong>الدرجة:</strong>
      {% if sub.grade != None %}{{ sub.grade }}{% else %}<span class="text-muted">—</span>{% endif %}
    </div>
    <div class="mt-2"><strong>تعليق المدرّس:</strong>
      {% if sub.feedback %}{{ sub.feedback }}{% else %}<span class="text-muted">لم يتم التعليق بعد.</span>{% endif %}
    </div>
    <hr>
    <div><strong>ملف:</strong>
      {% if sub.file %}<a href="{{ sub.file.url }}" target="_blank" rel="noopener">تحميل</a>{% else %}<span class="text-muted">—</span>{% endif %}
    </div>
    <div class="mt-2"><strong>رابط:</strong>
      {% if sub.link %}<a href="{{ sub.link }}" target="_blank" rel="noopener">{{ sub.link }}</a>{% else %}<span class="text-muted">—</span>{% endif %}
    </div>
    <div class="mt-2"><strong>إجابة نصية:</strong>
      {% if sub.answer_text %}<pre class="m-0" style="white-space:pre-wrap">{{ sub.answer_text }}</pre>{% else %}<span class="text-muted">—</span>{% endif %}
    </div>
    <div class="mt-2 text-muted"><small>وقت التسليم: {{ sub.submitted_at|date:"Y-m-d H:i" }}</small></div>
  </div>
</body>
</html>
